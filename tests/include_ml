#use "topfind";;
#require "result,vector";;
#require "sandbox";;
open Core_ops ;;

let v = make [1;2;3;4;5;6];;
let ii = iter v;;
implicit module F = FilterIterator(IntVectorIterator) ;;
(*
let ii2 = filter (ii : F.I.t)  (fun x -> 0 = x mod 2);;
 *)
let ii2 = F.make ii (fun x -> 0 = x mod 2) ;;
implicit module M = MapIterator (TYPEint)(TYPEint)(F) ;;
let m = map ii2 (fun x -> x * 2 );;
implicit module IS = IteratorSum(M)(Ops_int);;
sum m ;;

let r = Range.make 0 10 ;;
let ii = iter r ;;
implicit module RS = IteratorSum(RangeIterator)(Ops_int) ;;
sum ii ;;

let r = Range.make 0 10 ;;
let ii = iter r ;;
implicit module RCV = IteratorCollectVector(RangeIterator)(Ops_int) ;;
let v = collect ii ;;
Vector.to_list v ;;


let r = Range.make 0 10 ;;
let ii = iter {Range} r ;;
implicit module RCL = IteratorCollectList(RangeIterator)(Ops_int) ;;
let (l : int list) = collect ii ;;

(*
;;; Local Variables: ***
;;; mode:tuareg ***
;;; End: ***

*)
